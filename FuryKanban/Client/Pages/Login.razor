@layout LoginLayout
@using FuryKanban.Shared
@page "/"
@inject HttpClient Http
<div class="container">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<div class="card-group">
				<div class="card p-4">
					<div class="card-body">
						<h1>Login</h1>
						<p class="text-muted">Sign In to your account @_login.Login @_login.Password</p>
						<div class="input-group mb-3">
							<div class="input-group-prepend">
								<span class="input-group-text">
									<svg class="c-icon">
										<use xlink:href="vendors/coreui/icons/svg/free.svg#cil-user"></use>
									</svg>
								</span>
							</div>
							<input @bind="_login.Login" class="form-control" type="text" placeholder="Username">
						</div>
						<div class="input-group mb-4">
							<div class="input-group-prepend">
								<span class="input-group-text">
									<svg class="c-icon">
										<use xlink:href="vendors/coreui/icons/svg/free.svg#cil-lock-locked"></use>
									</svg>
								</span>
							</div>
							<input @bind="_login.Password" class="form-control" type="password" placeholder="Password">
						</div>
						<div class="row">
							<div class="col-6">
								<button @onclick="TryLogin" class="btn btn-primary px-4" type="button">Login</button>
							</div>
							<div class="col-6 text-right">
								<button class="btn btn-link px-0" type="button">Just see demo</button>
							</div>
						</div>
					</div>
				</div>
				<div class="card text-white bg-primary py-5 d-md-down-none" style="width:44%">
					<div class="card-body text-center">
						<div>
							<h2>Sign up</h2>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
							<NavLink href="registration" class="btn btn-lg btn-outline-light mt-3">Register Now!</NavLink>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@code {
	//todo- validate model
	private FuryKanban.Shared.Model.Security.LoginRequest _login = new FuryKanban.Shared.Model.Security.LoginRequest()
	{
		//todo- delete after testing
		Login = "123",
		Password = "234"
	};

	private async Task TryLogin(MouseEventArgs e)
	{
		var res = await Http.PostAsJsonAsync("api/security/login", _login);
	}
}
